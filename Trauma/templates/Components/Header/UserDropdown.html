<section class="xl:block hidden">
    <div class="mt-[-20px] md:mt-0 md:flex items-center cursor-pointer relative" onclick="toggleProfileId(event)">
        <div class="w-12 h-12 border bg-center bg-no-repeat bg-cover rounded-full" style="background-image: url('{% if user.profile_image %}{{user.profile_image}}{% endif %}');"></div>
        <div class="min-w-[250px] sm:min-w-[300px] p-1.5 hidden absolute bg-white rounded-lg w-[150px] top-[60px] right-0 border border-[#CACBE6]" id="profile_id">
            <a href="{% url 'MyAppointmentsPage' %}" class="font-medium group text-[#3C3C3C] transition-all hover:text-white rounded-md hover:bg-gradient-to-r from-[#0755E9] to-[#05DC75] px-3 py-2.5 text-md flex items-center gap-2">
                <svg class="group-hover:fill-white fill-[#3C3C3C] size-5" viewBox="0 0 16 21" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.2409 4.4515C12.2409 6.91 10.2479 8.903 7.78939 8.903C5.3309 8.903 3.33789 6.91 3.33789 4.4515C3.33789 1.99301 5.3309 0 7.78939 0C10.2479 0 12.2409 1.99301 12.2409 4.4515Z"/>
                    <path d="M15.5803 15.6915C15.5803 18.15 12.0925 20.143 7.79013 20.143C3.48776 20.143 0 18.15 0 15.6915C0 13.233 3.48776 11.24 7.79013 11.24C12.0925 11.24 15.5803 13.233 15.5803 15.6915Z"/>
                </svg>
                My Appointments
            </a>
            {% if not request.user.has_doctor_profile %}
                <a href="{% url 'onboarding' %}?signupAsDoctor=true&onboarding_type=doctor" target="_blank" class="block font-medium group text-[#3C3C3C] transition-all hover:text-white rounded-md hover:bg-gradient-to-r from-[#0755E9] to-[#05DC75] px-3 py-2.5 text-md flex items-center gap-2">
                    <svg class="group-hover:fill-white fill-[#3C3C3C] size-5" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3.65904 4.02363L3.73747 4.01766C3.76587 4.01487 3.79303 4.00581 3.81647 3.99131L3.81591 3.9918C3.89099 4.22153 3.98287 4.46318 4.09772 4.71627C4.24507 5.04743 4.39018 5.31942 4.55266 5.58196L4.53025 5.54218C4.5168 5.72318 4.50055 5.90914 4.47926 6.08914C4.46994 6.19533 4.44565 6.30007 4.40699 6.40091L4.40979 6.39196C4.40307 6.39444 4.39354 7.4262 4.39354 7.4262C4.39375 7.74635 4.51533 8.05711 4.7387 8.30848C4.96208 8.55985 5.27426 8.73721 5.625 8.812L5.63621 8.81399C5.65179 8.77809 5.67922 8.74721 5.71491 8.72538C5.7506 8.70355 5.79288 8.6918 5.83622 8.69167H6.15782C6.20076 8.69218 6.24259 8.70391 6.27806 8.7254C6.31353 8.74689 6.34109 8.77719 6.35727 8.8125L6.35783 8.81399C6.71154 8.74142 7.0273 8.56501 7.25395 8.31331C7.4806 8.06162 7.60488 7.74939 7.60666 7.4272V7.4267C7.60666 7.4267 7.58705 6.39941 7.57697 6.39245C7.54357 6.29634 7.52069 6.1976 7.50861 6.09759L7.50805 6.09013C7.48844 5.90914 7.47556 5.72765 7.45707 5.54318C7.59546 5.32141 7.74056 5.04992 7.8683 4.76998L7.88959 4.71727C8.00445 4.46418 8.09353 4.22302 8.17141 3.9928C8.19443 4.0073 8.22123 4.01637 8.24928 4.01915H8.24984L8.32884 4.02512C8.42409 4.03407 8.50813 3.96445 8.51597 3.85655L8.60113 2.89639V2.8954C8.60108 2.85676 8.58519 2.81946 8.55643 2.79046C8.52767 2.76145 8.48799 2.74273 8.44482 2.73778H8.43417C8.50878 2.2378 8.46256 1.72946 8.29859 1.24657L8.30587 1.27193C8.14784 0.960518 7.9075 0.687539 7.60524 0.476153C7.30298 0.264768 6.94772 0.121216 6.56961 0.0576793L6.55504 0.0556903C6.37173 0.0230707 6.1856 0.00443927 5.9987 0H5.98694C5.79142 0.00310727 5.59669 0.0227541 5.40538 0.0586737L5.42555 0.0556903C5.04764 0.117945 4.69203 0.259635 4.3885 0.468902C4.08496 0.67817 3.84232 0.948924 3.68089 1.2585L3.67472 1.27193C3.51342 1.75295 3.47043 2.25912 3.54866 2.75617L3.54642 2.73778C3.50313 2.74193 3.46308 2.7601 3.43394 2.78882C3.40479 2.81753 3.38859 2.85476 3.38843 2.89341V2.89689L3.47359 3.85705C3.48143 3.96744 3.56659 4.03407 3.65848 4.02512L3.65904 4.02363Z"/>
                        <path d="M11.9991 10.3785C11.9599 8.86688 11.7896 8.52479 11.6977 8.29308C11.6613 8.20009 11.6316 7.57159 10.4617 7.16385C9.74459 6.91325 8.81903 6.90828 8.03578 6.61441V7.43186C8.03497 7.85094 7.86996 8.25672 7.56904 8.57967C7.26812 8.90262 6.85001 9.12264 6.38636 9.20202L6.37347 9.20401C6.36508 9.24811 6.3395 9.2882 6.30121 9.31728C6.26291 9.34636 6.21433 9.36259 6.16393 9.36313H6.15385V9.9797C6.15385 10.269 6.28336 10.5465 6.51388 10.7511C6.7444 10.9557 7.05706 11.0706 7.38307 11.0706C7.70908 11.0706 8.02174 10.9557 8.25226 10.7511C8.48279 10.5465 8.61229 10.269 8.61229 9.9797V9.54909C8.44309 9.52707 8.28884 9.45078 8.17873 9.33464C8.06863 9.21851 8.01029 9.07059 8.01477 8.91887C8.01924 8.76715 8.08622 8.62214 8.20302 8.51128C8.31982 8.40042 8.47835 8.33139 8.64862 8.31726C8.81889 8.30312 8.9891 8.34486 9.12704 8.43457C9.26498 8.52428 9.36109 8.65575 9.39719 8.80411C9.43329 8.95246 9.40688 9.10742 9.32295 9.23966C9.23902 9.3719 9.1034 9.47225 8.94173 9.52174L8.93668 9.52324V10.0031C8.93668 10.3689 8.77294 10.7197 8.48148 10.9784C8.19001 11.2371 7.7947 11.3824 7.38251 11.3824C6.97032 11.3824 6.57501 11.2371 6.28354 10.9784C5.99208 10.7197 5.82834 10.3689 5.82834 10.0031V9.9782V9.9792V9.35716C5.78036 9.35426 5.73489 9.33706 5.6993 9.30837C5.66371 9.27967 5.64008 9.24114 5.63224 9.19904V9.19804C5.16809 9.11948 4.74915 8.90012 4.44722 8.57754C4.14528 8.25496 3.97912 7.84924 3.97722 7.42988V6.60596C3.19061 6.90579 2.25945 6.91176 1.53839 7.16286C0.365193 7.5701 0.338301 8.19711 0.302444 8.29158C0.212801 8.52429 0.0402399 8.8649 0.00102137 10.3775C-0.00570181 10.5764 0.0010214 10.8812 0.676701 11.1477C2.14796 11.6599 4.04333 11.819 5.91182 11.9333H6.0911C7.96351 11.82 9.85608 11.6613 11.3262 11.1477C11.9991 10.8827 12.0053 10.5799 11.9991 10.379V10.3785ZM3.77384 9.76191H3.07575V10.3839H2.57712V9.7639H1.87903V9.32136H2.57712V8.7018H3.07575V9.32136H3.77384V9.76191Z"/>
                        <path d="M9.09079 8.92986V8.92936C9.09071 8.84063 9.05093 8.75556 8.9802 8.69285C8.90947 8.63015 8.81357 8.59494 8.71359 8.59497C8.61361 8.595 8.51774 8.63027 8.44706 8.69303C8.37638 8.75578 8.33667 8.84088 8.33667 8.92961C8.33667 9.01834 8.37638 9.10344 8.44706 9.16619C8.51774 9.22894 8.61361 9.26422 8.71359 9.26425C8.81357 9.26428 8.90947 9.22907 8.9802 9.16637C9.05093 9.10366 9.09071 9.01859 9.09079 8.92986Z" />
                    </svg>
                    Become a Doctor
                </a>
            {% endif %}
            {% for profile in request.user.profiles %}
                <a href="#" target="_blank" class="font-medium group text-[#3C3C3C] transition-all hover:text-white rounded-md hover:bg-gradient-to-r from-[#0755E9] to-[#05DC75] px-3 py-2.5 text-md flex items-center gap-2">
                    <svg class="group-hover:fill-white fill-[#3C3C3C] size-5" viewBox="0 0 16 21" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.2409 4.4515C12.2409 6.91 10.2479 8.903 7.78939 8.903C5.3309 8.903 3.33789 6.91 3.33789 4.4515C3.33789 1.99301 5.3309 0 7.78939 0C10.2479 0 12.2409 1.99301 12.2409 4.4515Z"/>
                        <path d="M15.5803 15.6915C15.5803 18.15 12.0925 20.143 7.79013 20.143C3.48776 20.143 0 18.15 0 15.6915C0 13.233 3.48776 11.24 7.79013 11.24C12.0925 11.24 15.5803 13.233 15.5803 15.6915Z"/>
                    </svg>
                    <p class="!font-[400]">{% if profile.profile_type == 'Doctor' %}Dr. {% endif %}{{profile.full_name}}</p>
                </a>
            {% endfor %}
            <a href="{% url 'HandleLogout' %}" class="font-medium group text-[#3C3C3C] transition-all hover:text-white rounded-md hover:bg-gradient-to-r from-[#0755E9] to-[#05DC75] px-3 py-2.5 text-md flex items-center gap-2">
                <svg class="group-hover:fill-white fill-[#3C3C3C] group-hover:stroke-white stroke-[#3C3C3C] size-5" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.324 13.093H14.0429C13.9554 13.093 13.8734 13.1321 13.8187 13.2009C13.6912 13.3591 13.5545 13.5116 13.4105 13.6568C12.8217 14.2585 12.1243 14.738 11.3568 15.0688C10.5616 15.4117 9.70694 15.5876 8.84376 15.586C7.97086 15.586 7.12529 15.4112 6.33075 15.0688C5.56323 14.738 4.86578 14.2585 4.27697 13.6568C3.68711 13.0571 3.21677 12.3463 2.892 11.5637C2.55486 10.7526 2.38538 9.89118 2.38538 9.00002C2.38538 8.10885 2.55668 7.24746 2.892 6.4363C3.21637 5.65304 3.68289 4.94793 4.27697 4.34328C4.87106 3.73863 5.56172 3.26235 6.33075 2.93119C7.12529 2.58886 7.97086 2.41398 8.84376 2.41398C9.71666 2.41398 10.5622 2.587 11.3568 2.93119C12.1258 3.26235 12.8165 3.73863 13.4105 4.34328C13.5545 4.49026 13.6894 4.64281 13.8187 4.79909C13.8734 4.86793 13.9572 4.907 14.0429 4.907H15.324C15.4388 4.907 15.5099 4.77677 15.4461 4.67816C14.0484 2.46049 11.6028 0.992586 8.82371 1.00003C4.45739 1.01119 0.956669 4.62979 1.00041 9.08188C1.04414 13.4633 4.53939 17 8.84376 17C11.6155 17 14.0502 15.534 15.4461 13.3219C15.5081 13.2233 15.4388 13.093 15.324 13.093ZM16.9441 8.88281L14.3582 6.79909C14.2616 6.72095 14.1213 6.79165 14.1213 6.9163V8.33025H8.39911C8.31893 8.33025 8.25332 8.39723 8.25332 8.47909V9.52094C8.25332 9.6028 8.31893 9.66978 8.39911 9.66978H14.1213V11.0837C14.1213 11.2084 14.2634 11.2791 14.3582 11.2009L16.9441 9.11722C16.9615 9.1033 16.9756 9.08551 16.9853 9.0652C16.995 9.0449 17 9.0226 17 9.00002C17 8.97743 16.995 8.95513 16.9853 8.93482C16.9756 8.91452 16.9615 8.89673 16.9441 8.88281Z"/>
                </svg>                
                Logout
            </a>
        </div>
    </div>
</section>

<script>
    function toggleProfileId(event) {
        const profileId = document.getElementById('profile_id');
        profileId.classList.toggle('!block');
        event.stopPropagation();
    }

    document.addEventListener('click', (e) => {
        const profileId = document.getElementById('profile_id');
        if (profileId && !profileId.contains(e.target)) {
            profileId.classList.remove('!block');
        }
    });
</script>